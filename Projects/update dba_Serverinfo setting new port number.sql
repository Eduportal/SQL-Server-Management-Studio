CREATE	TABLE				#ServerMatrix				(SQLName sysname, EnvNum sysname, ProdServerMatch sysname, port sysname)

INSERT INTO #ServerMatrix
SELECT 'FREAGMSSQL01\A','alpha','G1SQLA\A','1252' UNION ALL
SELECT 'FREAGMSSQL01\B','alpha','G1SQLB\B','1893' UNION ALL
SELECT 'FREAGMSSQL01\HGA','alpha','SEAFRESQLRPT01','2082' UNION ALL
SELECT 'FREBASPSQL01\A','beta','SEADCASPSQLA\A','1511' UNION ALL
SELECT 'FREBGMSSQLB01\B','beta','G1SQLB\B','1893' UNION ALL
SELECT 'FREBGMSSQLB01\HGA','beta','SEAFRESQLRPT01','2082' UNION ALL
SELECT 'FRECASPSQL01\A','candidate01','SEADCASPSQLA\A','1511' UNION ALL
SELECT 'FRECGMSSQLA01\A','candidate01','G1SQLA\A','1252' UNION ALL
SELECT 'FRECGMSSQLB01\B','candidate01','G1SQLB\B','1893' UNION ALL
SELECT 'FRECGMSSQLB01\HGA','candidate01','SEAFRESQLRPT01','2082' UNION ALL
SELECT 'FRECPCXSQL01\A','candidate01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'FRECPCXSQL01\A','candidate01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'FRECPCXSQL01\A','candidate01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'FRECPCXSQL01\A','candidate01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'FRECPCXSQL01\A','candidate01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'FRECSHWSQL01\A','candidate01','SEADCSHSQLA\A','4889' UNION ALL
SELECT 'FRECSHWSQL01\A','candidate01','SEADCSHSQLA\A','4889' UNION ALL
SELECT 'FRECSHWSQL01\A','candidate01','FREPSQLEDW01','1433' UNION ALL
SELECT 'FRECSHWSQL01\A','candidate01','SEAPEDSQL0A','1433' UNION ALL
SELECT 'FRETHYPERSQL01','candidate01','FREPHYPERSQL01','1433' UNION ALL
SELECT 'FRETHYPERSQL01','candidate01','FREPHYPERSQL01','1433' UNION ALL
SELECT 'FRETHYPERSQL01','candidate01','FREPHYPERSQL01','1433' UNION ALL
SELECT 'FRETHYPERSQL01','candidate01','FREPHYPERSQL01','1433' UNION ALL
SELECT 'FRETHYPERSQL01','candidate01','FREPHYPERSQL01','1433' UNION ALL
SELECT 'FRETHYPERSQL01','candidate01','FREPHYPERSQL01','1433' UNION ALL
SELECT 'FRETHYPERSQL01','candidate01','FREPHYPERSQL01','1433' UNION ALL
SELECT 'FRETHYPERSQL01','candidate01','FREPHYPERSQL01','1433' UNION ALL
SELECT 'FRETHYPERSQL01','candidate01','FREPHYPERSQL01','1433' UNION ALL
SELECT 'FRETHYPERSQL01','candidate01','FREPHYPERSQL01','1433' UNION ALL
SELECT 'FRETHYPERSQL01','candidate01','FREPHYPERSQL01','1433' UNION ALL
SELECT 'FRETHYPERSQL01','candidate01','FREPHYPERSQL01','1433' UNION ALL
SELECT 'ASPSQLDEV01\A','dev01','SEADCASPSQLA\A','1511' UNION ALL
SELECT 'CATSQLDEV01','dev01','SEADCASPSQLA\A','1511' UNION ALL
SELECT 'CATSQLDEV01\A','dev01','SEADCASPSQLA\A','1511' UNION ALL
SELECT 'DAPSQLDEV01','dev01','SEAFRESQL01','1433' UNION ALL
SELECT 'DAPSQLDEV01','dev01','SEAFRESQL01','1433' UNION ALL
SELECT 'DEVSHSQL01\A','dev01','SEADCSHSQLA\A','4889' UNION ALL
SELECT 'DEVSHSQL01\A','dev01','SEADCSHSQLA\A','4889' UNION ALL
SELECT 'FREDCOGSRS01','dev01','FREPCOGSRS01','1433' UNION ALL
SELECT 'FREDGSYSSQL01','dev01','SEAPGSYSSQL01','1433' UNION ALL
SELECT 'FREDMRTSQL01\A','dev01','SEADCCSO01','1433' UNION ALL
SELECT 'FREDMRTSQL01\A','dev01','SEADCSQLWVA\A','1501' UNION ALL
SELECT 'FREDMRTSQL01\B','dev01','SEADCSQLWVB\B','1477' UNION ALL
SELECT 'FREDRZTSQL01\A01','dev01','SEAPTRCSQLA\A','1608' UNION ALL
SELECT 'FREDSQLDIST01','dev01','SEAPSQLDIST0A','1433' UNION ALL
SELECT 'FREDSQLEDW01','dev01','FREPSQLEAS01','1433' UNION ALL
SELECT 'FREDSQLEDW01','dev01','FREPSQLEDW01','1433' UNION ALL
SELECT 'FREDSQLTAX01','dev01','SEAPSQLTAX0A','1433' UNION ALL
SELECT 'FREDSQLTOL01\A01','dev01','SEAPSCOMSQLA','1433' UNION ALL
SELECT 'FREDSQLTOL01\A01','dev01','SEAEXSQLMOM03','1433' UNION ALL
SELECT 'FRETSQLTAX01','dev01','SEAPSQLTAX0A','1433' UNION ALL
SELECT 'GINSSQLDEV01\A','dev01','SEAPSHLSQL0A\A','1433' UNION ALL
SELECT 'GINSSQLDEV01\A','dev01','SEAFRESQLRPT01','1433' UNION ALL
SELECT 'SEAFREDWDMSDD01','dev01','SEAPDWDCSQLD0A','1433' UNION ALL
SELECT 'SEAFREDWDMSDD01','dev01','SEAPDWDCSQLP0A','1433' UNION ALL
SELECT 'SEAFREDWDMSPD01','dev01','SEAPDWDCSQLP0A','1433' UNION ALL
SELECT 'SEAFREDWDMSPD01','dev01','SEAPDWDCSQLD0A','1433' UNION ALL
SELECT 'SEAFRESQLDWD01','dev01','FREPSQLEDW01','1433' UNION ALL
SELECT 'SEAFRESQLT01\DEV','dev01','SEAFRESQL01','1433' UNION ALL
SELECT 'SEALABSSQL01','dev01','SEADCLABSSQL01\A','1166' UNION ALL
SELECT 'SEAVMSQLMSDEV01\A','dev01','SEADCSQLWVB\B','1477' UNION ALL
SELECT 'ASPSQLDEV01\A02','dev02','SEADCASPSQLA\A','1511' UNION ALL
SELECT 'CRMSQLDEV02','dev02','FREPCOGSRS01','1433' UNION ALL
SELECT 'DEVSHSQL02\A','dev02','SEADCSHSQLA\A','4889' UNION ALL
SELECT 'FREDMRTSQL02\A','dev02','FREPCOGSRS01','1433' UNION ALL
SELECT 'FREDMRTSQL02\B','dev02','SEADCSQLWVB\B','1477' UNION ALL
SELECT 'GINSSQLDEV02\A','dev02','SEAFRESQLRPT01','1433' UNION ALL
SELECT 'GINSSQLDEV02\A','dev02','SEAPSHLSQL0A\A','1433' UNION ALL
SELECT 'NYMVSQLDEV02','dev02','SEAPEDSQL0A','1433' UNION ALL
SELECT 'NYMVSQLDEV02','dev02','SEAPEDSQL0A','1433' UNION ALL
SELECT 'NYMVSQLDEV02','dev02','SEAPEDSQL0A','1433' UNION ALL
SELECT 'NYMVSQLDEV02','dev02','SEAPEDSQL0A','1433' UNION ALL
SELECT 'NYMVSQLDEV02','dev02','SEAPEDSQL0A','1433' UNION ALL
SELECT 'NYMVSQLDEV02','dev02','SEAPEDSQL0A','1433' UNION ALL
SELECT 'NYMVSQLDEV02','dev02','SEAPSQLMVINT01','1433' UNION ALL
SELECT 'NYMVSQLDEV02','dev02','SEADCSHSQLA\A','4889' UNION ALL
SELECT 'PCSQLDEV01\A02','dev02','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'PCSQLDEV01\A02','dev02','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'PCSQLDEV01\A02','dev02','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'PCSQLDEV01\A02','dev02','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'PCSQLDEV01\A02','dev02','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'GINSSQLDEV04\A','dev04','SEAFRESQLRPT01','1433' UNION ALL
SELECT 'GINSSQLDEV04\A','dev04','SEAPSHLSQL0A\A','1433' UNION ALL
SELECT 'GMSSQLDEV04\A','dev04','G1SQLA\A','1252' UNION ALL
SELECT 'GMSSQLDEV04\B','dev04','G1SQLB\B','1893' UNION ALL
SELECT 'GMSSQLDEV04\HGA','dev04','SEAFRESQLRPT01','2082' UNION ALL
SELECT 'ASPSQLLOAD01\A','load01','SEADCASPSQLA\A','1511' UNION ALL
SELECT 'FRELGMSSQLA\A','load01','G1SQLA\A','1252' UNION ALL
SELECT 'FRELGMSSQLB\B','load01','G1SQLB\B','1893' UNION ALL
SELECT 'FRELRZTSQL01\A01','load01','SEAPTRCSQLA\A','1608' UNION ALL
SELECT 'FRELSHLSQL01','load01','SEAPSHLSQL0A\A','1433' UNION ALL
SELECT 'FRELSHLSQL01','load01','SEAFRESQLRPT01','1433' UNION ALL
SELECT 'FRESCRMSQL01','load01','FREPCOGSRS01','1433' UNION ALL
SELECT 'PCSQLLOADA\A','load01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'PCSQLLOADA\A','load01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'PCSQLLOADA\A','load01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'PCSQLLOADA\A','load01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'PCSQLLOADA\A','load01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'SEAFRESQLBOT01\HGA','load01','SEAFRESQLRPT01','2082' UNION ALL
SELECT 'SHAREDSQLLOAD01\A','load01','SEADCSHSQLA\A','4889' UNION ALL
SELECT 'FRELASPSQL02\A','load02','SEADCASPSQLA\A','1511' UNION ALL
SELECT 'FRELRZTSQL01\A02','load02','SEAPTRCSQLA\A','1608' UNION ALL
SELECT 'GMSSQLLOAD02\A','load02','G1SQLA\A','1252' UNION ALL
SELECT 'GMSSQLLOAD02\B','load02','G1SQLB\B','1893' UNION ALL
SELECT 'GMSSQLLOAD02\HGA','load02','SEAFRESQLRPT01','2082' UNION ALL
SELECT 'PCSQLLOAD02\A','load02','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'SHAREDSQLLOAD02\A','load02','SEADCSHSQLA\A','4889' UNION ALL
SELECT 'FRESCOGSRS01','stage','FREPCOGSRS01','1433' UNION ALL
SELECT 'FRESCRMSQL02','stage','FREPCOGSRS01','1433' UNION ALL
SELECT 'FRESEDSQL0A','stage','SEAPEDSQL0A','1433' UNION ALL
SELECT 'FRESSHLSQL01\A','stage','SEAPSHLSQL0A\A','1433' UNION ALL
SELECT 'FRESSQLDIST0A','stage','SEAPSQLDIST0A','1433' UNION ALL
SELECT 'FRESSQLEDW01','stage','FREPSQLEAS01','1433' UNION ALL
SELECT 'FRESSQLRYL01','stage','FREPSQLRYLA01','1433' UNION ALL
SELECT 'FRESSQLRYL11','stage','FREPSQLRYLA11','1433' UNION ALL
SELECT 'FRESSQLRYL12','stage','FREPSQLRYLA12','1433' UNION ALL
SELECT 'FRESSQLRYLI01','stage','FREPSQLRYLI01','1433' UNION ALL
SELECT 'FRESSQLTAX01','stage','SEAPSQLTAX0A','1433' UNION ALL
SELECT 'GONESSQLA\A','stage','G1SQLA\A','1252' UNION ALL
SELECT 'GONESSQLB\B','stage','G1SQLB\B','1893' UNION ALL
SELECT 'SEAFRESQLBOT01','stage','SEAINTRASQL01','1433' UNION ALL
SELECT 'SEAFRESQLBOT01','stage','SEAINTRASQL01','1433' UNION ALL
SELECT 'SEAFRESQLBOT01','stage','SEAFRESQLBOA','1433' UNION ALL
SELECT 'SEAFRESQLBOT01','stage','SEAFRESQLBOA','1433' UNION ALL
SELECT 'SEAFRESQLBOT01','stage','SEAFRESQLBOA','1433' UNION ALL
SELECT 'SEAFRESQLBOT01','stage','SEAFRESQLBOA','1433' UNION ALL
SELECT 'SEAFRESQLBOT01','stage','SEAFRESQLRPT01','1433' UNION ALL
SELECT 'SEAFRESQLBOT01','stage','SEAPSQLSHR02A','1433' UNION ALL
SELECT 'SEAFRESQLBOT01','stage','SEAPSQLSHR02A','1433' UNION ALL
SELECT 'SEAFRESQLBOT01','stage','SEAPSQLSHR02A','1433' UNION ALL
SELECT 'SEAFRESQLBOT01','stage','SEAPSQLSHR02A','1433' UNION ALL
SELECT 'SEAFRESQLSTGDAP','stage','SEAFRESQL01','1433' UNION ALL
SELECT 'SEAFRESQLT01\STAGE','stage','SEAFRESQL01','1433' UNION ALL
SELECT 'SEAFRESQLTALS01','stage','SEAFRESQLTAL04','1433' UNION ALL
SELECT 'SEAFRESQLTALS02','stage','SEAFRESQLTAL05','1433' UNION ALL
SELECT 'SEAFRESQLWVSTGA\A','stage','FREPCOGSRS01','1433' UNION ALL
SELECT 'SEAFRESQLWVSTGB\B','stage','SEADCSQLWVB\B','1477' UNION ALL
SELECT 'SEASTGASPSQLA\A','stage','SEADCASPSQLA\A','1511' UNION ALL
SELECT 'SEASTGPCSQLA\A','stage','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'SEASTGSHSQLA\A','stage','FREPCOGSRS01','1433' UNION ALL
SELECT 'SEASTRCSQLA','stage','SEAPTRCSQLA\A','1608' UNION ALL
SELECT 'SEASDELSQL01','staging','SEADCASPSQLA\A','1511' UNION ALL
SELECT 'ASPSQLTEST01\A','test01','SEADCASPSQLA\A','1511' UNION ALL
SELECT 'CRMSQLTEST01','test01','FREPCOGSRS01','1433' UNION ALL
SELECT 'DAPSQLTEST01','test01','SEAFRESQL01','1433' UNION ALL
SELECT 'DAPSQLTEST01','test01','SEAFRESQL01','1433' UNION ALL
SELECT 'FREDUSPSSQL01','test01','SEAPSQLSPS0A','1433' UNION ALL
SELECT 'FREDUSPSSQL01','test01','SEAPSQLSPS0A','1433' UNION ALL
SELECT 'FRETCOGSRS01','test01','FREPCOGSRS01','1433' UNION ALL
SELECT 'FRETMRTSQL01\A','test01','SEADCSQLWVA\A','1501' UNION ALL
SELECT 'FRETMRTSQL01\B','test01','SEADCSQLWVB\B','1477' UNION ALL
SELECT 'FRETRZTSQL01\A01','test01','SEAPTRCSQLA\A','1608' UNION ALL
SELECT 'FRETSCOMRPTSQL1','test01','SEAPSCOMSQLDWA','1433' UNION ALL
SELECT 'FRETSCOMRPTSQL1','test01','FREPCOGSRS01','1433' UNION ALL
SELECT 'FRETSCOMSQL01','test01','SEAPSCOMSQLA','1433' UNION ALL
SELECT 'FRETSQLDIST01','test01','SEAPSQLDIST0A','1433' UNION ALL
SELECT 'FRETSQLEDW01','test01','FREPSQLEAS01','1433' UNION ALL
SELECT 'FRETSQLNOE01','test01','FREPCOGSRS01','1433' UNION ALL
SELECT 'FRETSQLNOE01','test01','FREPSQLNOE01','1433' UNION ALL
SELECT 'FRETUSPSSQL1','test01','SEAPSQLSPS0A','1433' UNION ALL
SELECT 'FRETUSPSSQL1','test01','SEAPSQLSPS0A','1433' UNION ALL
SELECT 'FRETUSPSSQL1','test01','SEAPSQLSPS0A','1433' UNION ALL
SELECT 'FRETUSPSSQL1','test01','SEAPSQLTFS0A','1433' UNION ALL
SELECT 'GINSSQLTEST01\A','test01','SEAPSHLSQL0A\A','1433' UNION ALL
SELECT 'GINSSQLTEST01\A','test01','SEAFRESQLRPT01','1433' UNION ALL
SELECT 'GMSSQLTEST01\A','test01','G1SQLA\A','1252' UNION ALL
SELECT 'GMSSQLTEST01\B','test01','G1SQLB\B','1893' UNION ALL
SELECT 'GMSSQLTEST01\HGA','test01','SEAFRESQLRPT01','2082' UNION ALL
SELECT 'PCSQLTEST01\A','test01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'PCSQLTEST01\A','test01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'PCSQLTEST01\A','test01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'PCSQLTEST01\A','test01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'PCSQLTEST01\A','test01','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'SEAFRESQLBOT01\TEST','test01','FREPCOGSRS01','1433' UNION ALL
SELECT 'SEAFRESQLDWT01','test01','FREPSQLEDW01','1433' UNION ALL
SELECT 'SEAFRESQLT01\TEST','test01','SEAFRESQL01','1433' UNION ALL
SELECT 'SEAFRESQLTALTST','test01','SEAFRESQLTAL05','1433' UNION ALL
SELECT 'TESTSHSQL01\A','test01','SEADCSHSQLA\A','4889' UNION ALL
SELECT 'TESTSHSQL01\A','test01','SEADCSHSQLA\A','4889' UNION ALL
SELECT 'TESTSHSQL01\A','test01','SEAPEDSQL0A','1433' UNION ALL
SELECT 'TESTSHSQL01\A','test01','SEAPEDSQL0A','1433' UNION ALL
SELECT 'TESTSHSQL01\A','test01','SEAPEDSQL0A','1433' UNION ALL
SELECT 'TESTSHSQL01\A','test01','SEAPEDSQL0A','1433' UNION ALL
SELECT 'TESTSHSQL01\A','test01','SEAPEDSQL0A','1433' UNION ALL
SELECT 'TESTSHSQL01\A','test01','SEAPEDSQL0A','1433' UNION ALL
SELECT 'ASPSQLTEST01\A02','test02','SEADCASPSQLA\A','1511' UNION ALL
SELECT 'CRMSQLTEST02','test02','FREPCOGSRS01','1433' UNION ALL
SELECT 'FRETMRTSQL02\A','test02','FREPCOGSRS01','1433' UNION ALL
SELECT 'FRETMRTSQL02\B','test02','SEADCSQLWVB\B','1477' UNION ALL
SELECT 'FRETRZTSQL01\A02','test02','SEAPTRCSQLA\A','1608' UNION ALL
SELECT 'FRETSQLDIP02','test02','FREPVARSQL01','1433' UNION ALL
SELECT 'FRETSQLRYL02','test02','FREPSQLRYLB01','1433' UNION ALL
SELECT 'FRETSQLRYLI02','test02','FREPSQLRYLI01','1433' UNION ALL
SELECT 'GINSSQLTEST02\A','test02','SEAFRESQLRPT01','1433' UNION ALL
SELECT 'GINSSQLTEST02\A','test02','SEAPSHLSQL0A\A','1433' UNION ALL
SELECT 'GMSSQLTEST02\A','test02','G1SQLA\A','1252' UNION ALL
SELECT 'GMSSQLTEST02\B','test02','G1SQLB\B','1893' UNION ALL
SELECT 'GMSSQLTEST02\HGA','test02','SEAFRESQLRPT01','2082' UNION ALL
SELECT 'PCSQLTEST01\A02','test02','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'TESTSHSQL02\A','test02','SEADCSHSQLA\A','4889' UNION ALL
SELECT 'FRETRZTSQL01\A03','test03','SEAPTRCSQLA\A','1608' UNION ALL
SELECT 'FRETSQLRYL03','test03','FREPSQLRYLB01','1433' UNION ALL
SELECT 'FRETSQLRYLI03','test03','FREPSQLRYLI01','1433' UNION ALL
SELECT 'GINSSQLTEST03\A','test03','SEAFRESQLRPT01','1433' UNION ALL
SELECT 'GINSSQLTEST03\A','test03','SEAPSHLSQL0A\A','1433' UNION ALL
SELECT 'GMSSQLTEST03\A','test03','G1SQLA\A','1252' UNION ALL
SELECT 'GMSSQLTEST03\B','test03','G1SQLB\B','1893' UNION ALL
SELECT 'GMSSQLTEST03\HGA','test03','SEAFRESQLRPT01','2082' UNION ALL
SELECT 'FRETCRMSQL04','test04','FREPCOGSRS01','1433' UNION ALL
SELECT 'GINSSQLTEST04\A','test04','SEAFRESQLRPT01','1433' UNION ALL
SELECT 'GINSSQLTEST04\A','test04','SEAPSHLSQL0A\A','1433' UNION ALL
SELECT 'GMSSQLTEST04\A','test04','G1SQLA\A','1252' UNION ALL
SELECT 'GMSSQLTEST04\B','test04','G1SQLB\B','1893' UNION ALL
SELECT 'GMSSQLTEST04\B','test04','G1SQLB\B','1893' UNION ALL
SELECT 'GMSSQLTEST04\HGA','test04','SEAFRESQLRPT01','2082' UNION ALL
SELECT 'FREBGMSSQLA01\A','beta','G1SQLA\A','1252' UNION ALL
SELECT 'FREBPCXSQL01\A','beta','SEADCPCSQLA\A','1996' UNION ALL
SELECT 'FREBSHWSQL01\A','beta','SEADCSHSQLA\A','4889'


DELETE	#ServerMatrix
WHERE	Port = '1433'
AND		SQLName IN (SELECT DISTINCT SQLName FROM #ServerMatrix WHERE Port != '1433')

SELECT	si.sqlname,si.port,sm.port,si.SQLEnv
FROM	dbacentral..dba_ServerInfo si
JOIN	(SELECT DISTINCT SQLName,port FROM #ServerMatrix) sm
	ON	si.SQLName = sm.SQLName
WHERE	si.port != sm.port	
ORDER BY 4,1



UPDATE	dbacentral..dba_ServerInfo
	SET	port = sm.port
FROM	dbacentral..dba_ServerInfo si
JOIN	(SELECT DISTINCT SQLName,port FROM #ServerMatrix) sm
	ON	si.SQLName = sm.SQLName
WHERE	si.port != sm.port	
	AND	si.SQLEnv IN ('beta','candidate')